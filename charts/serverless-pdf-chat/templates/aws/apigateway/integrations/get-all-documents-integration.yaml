apiVersion: apigatewayv2.aws.upbound.io/v1beta1
kind: Integration
metadata:
  name: {{ include "serverless-pdf-chat.fullname" . }}-get-all-documents-integration
  labels:
    {{- include "serverless-pdf-chat.labels" . | nindent 4 }}
spec:
  forProvider:
    region: {{ .Values.aws.region }}
    api_id: {{ "{{" }} resolve:path:apiId {{ "}}" }}
    integration_type: AWS_PROXY
    integration_uri: {{ "{{" }} resolve:path:functionArn {{ "}}" }}
    payload_format_version: "2.0"
    connection_type: INTERNET
  providerConfigRef:
    name: {{ .Values.aws.providerConfigName }}
  references:
    - apiId:
        from:
          apiRef:
            name: {{ include "serverless-pdf-chat.fullname" . }}-api
    - functionArn:
        from:
          apiRef:
            name: {{ include "serverless-pdf-chat.fullname" . }}-get-all-documents-function
            path: status.atProvider.arn
